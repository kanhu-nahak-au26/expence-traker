{"ast":null,"code":"import React,{useEffect}from\"react\";import{useFormik}from\"formik\";import{useDispatch,useSelector}from\"react-redux\";import{useHistory}from\"react-router-dom\";import*as Yup from\"yup\";import{registerUserAction}from\"../../redux/slices/users/usersSlices\";import DisabledButton from\"../../components/DisabledButton\";//form validations\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var formSchema=Yup.object({email:Yup.string().required(\"Email is required\"),password:Yup.string().required(\"Password is required\"),firstname:Yup.string().required(\"First Name is required\"),lastname:Yup.string().required(\"Last Name is required\")});var Register=function Register(){//history\nvar history=useHistory();//get data from store\nvar user=useSelector(function(state){return state===null||state===void 0?void 0:state.users;});var userAppErr=user.userAppErr,userServerErr=user.userServerErr,userLoading=user.userLoading,isRegistered=user.isRegistered;//dispatch\nvar dispatch=useDispatch();//formik form\nvar formik=useFormik({initialValues:{email:\"\",password:\"\",firstname:\"\",lastname:\"\"},onSubmit:function onSubmit(values){dispatch(registerUserAction(values));},validationSchema:formSchema});// Redirect\nuseEffect(function(){if(isRegistered){history.push(\"/login\");}},[isRegistered]);return/*#__PURE__*/_jsxs(\"section\",{className:\"position-relative py-5 overflow-hidden vh-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-none d-md-block position-absolute top-0 start-0 bg-dark w-75 h-100\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-md-none position-absolute top-0 start-0 bg-primary w-100 h-100\"}),/*#__PURE__*/_jsx(\"div\",{className:\"container position-relative mx-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-5 mb-5\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h2\",{className:\"display-5 fw-bold mb-4 text-white\",children:\"Keep Track of your income and expenses flow\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-5 ms-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-5 bg-light rounded text-center\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:formik.handleSubmit,children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-muted\",children:\"New User\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"fw-bold mb-5\",children:\"Register\"}),userAppErr||userServerErr?/*#__PURE__*/_jsxs(\"div\",{class:\"alert alert-danger\",role:\"alert\",children:[userServerErr,\" \",userAppErr]}):null,/*#__PURE__*/_jsx(\"input\",{value:formik.values.firstname,onChange:formik.handleChange(\"firstname\"),onBlur:formik.handleBlur(\"firstname\"),className:\"form-control mb-2\",type:\"text\",placeholder:\"First Name\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-danger mb-2\",children:formik.touched.firstname&&formik.errors.firstname}),/*#__PURE__*/_jsx(\"input\",{value:formik.values.lastname,onChange:formik.handleChange(\"lastname\"),onBlur:formik.handleBlur(\"lastname\"),className:\"form-control mb-2\",type:\"text\",placeholder:\"Last Name\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-danger mb-2\",children:formik.touched.lastname&&formik.errors.lastname}),/*#__PURE__*/_jsx(\"input\",{value:formik.values.email,onChange:formik.handleChange(\"email\"),onBlur:formik.handleBlur(\"email\"),className:\"form-control mb-2\",type:\"email\",placeholder:\"Email\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-danger mb-2\",children:formik.touched.email&&formik.errors.email}),/*#__PURE__*/_jsx(\"input\",{value:formik.values.password,onChange:formik.handleChange(\"password\"),onBlur:formik.handleBlur(\"password\"),className:\"form-control mb-2\",type:\"password\",placeholder:\"Password\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-danger mb-2\",children:formik.touched.password&&formik.errors.password}),userLoading?/*#__PURE__*/_jsx(DisabledButton,{}):/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary py-2 w-100 mb-4\",children:\"Register\"})]})})})]})})]});};export default Register;","map":{"version":3,"sources":["/home/admin1/attainu/attainu/kanhu-nahak-au26/monthly-tests/Month-07/Full-Stack/expense-tracker /client/src/pages/users/Register.js"],"names":["React","useEffect","useFormik","useDispatch","useSelector","useHistory","Yup","registerUserAction","DisabledButton","formSchema","object","email","string","required","password","firstname","lastname","Register","history","user","state","users","userAppErr","userServerErr","userLoading","isRegistered","dispatch","formik","initialValues","onSubmit","values","validationSchema","push","handleSubmit","handleChange","handleBlur","touched","errors"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useFormik } from \"formik\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport * as Yup from \"yup\";\nimport { registerUserAction } from \"../../redux/slices/users/usersSlices\";\nimport DisabledButton from \"../../components/DisabledButton\";\n\n//form validations\nconst formSchema = Yup.object({\n  email: Yup.string().required(\"Email is required\"),\n  password: Yup.string().required(\"Password is required\"),\n  firstname: Yup.string().required(\"First Name is required\"),\n  lastname: Yup.string().required(\"Last Name is required\"),\n});\n\nconst Register = () => {\n  //history\n  const history = useHistory();\n  //get data from store\n  const user = useSelector(state => state?.users);\n  const { userAppErr, userServerErr, userLoading, isRegistered } = user;\n\n  //dispatch\n  const dispatch = useDispatch();\n  //formik form\n  const formik = useFormik({\n    initialValues: {\n      email: \"\",\n      password: \"\",\n      firstname: \"\",\n      lastname: \"\",\n    },\n    onSubmit: values => {\n      dispatch(registerUserAction(values));\n    },\n    validationSchema: formSchema,\n  });\n\n  // Redirect\n  useEffect(() => {\n    if (isRegistered) {\n      history.push(\"/login\");\n    }\n  }, [isRegistered]);\n\n  return (\n    <section className=\"position-relative py-5 overflow-hidden vh-100\">\n      <div className=\"d-none d-md-block position-absolute top-0 start-0 bg-dark w-75 h-100\"></div>\n      <div className=\"d-md-none position-absolute top-0 start-0 bg-primary w-100 h-100\"></div>\n      <div className=\"container position-relative mx-auto\">\n        <div className=\"row align-items-center\">\n          <div className=\"col-12 col-lg-5 mb-5\">\n            <div>\n              <h2 className=\"display-5 fw-bold mb-4 text-white\">\n                Keep Track of your income and expenses flow\n              </h2>\n            </div>\n          </div>\n          <div className=\"col-12 col-lg-5 ms-auto\">\n            <div className=\"p-5 bg-light rounded text-center\">\n              <form onSubmit={formik.handleSubmit}>\n                <span className=\"text-muted\">New User</span>\n                <h3 className=\"fw-bold mb-5\">Register</h3>\n\n                {/* Display err here */}\n                {userAppErr || userServerErr ? (\n                  <div class=\"alert alert-danger\" role=\"alert\">\n                    {userServerErr} {userAppErr}\n                  </div>\n                ) : null}\n                <input\n                  value={formik.values.firstname}\n                  onChange={formik.handleChange(\"firstname\")}\n                  onBlur={formik.handleBlur(\"firstname\")}\n                  className=\"form-control mb-2\"\n                  type=\"text\"\n                  placeholder=\"First Name\"\n                />\n                {/* Err */}\n                <div className=\"text-danger mb-2\">\n                  {formik.touched.firstname && formik.errors.firstname}\n                </div>\n                <input\n                  value={formik.values.lastname}\n                  onChange={formik.handleChange(\"lastname\")}\n                  onBlur={formik.handleBlur(\"lastname\")}\n                  className=\"form-control mb-2\"\n                  type=\"text\"\n                  placeholder=\"Last Name\"\n                />\n                {/* Err */}\n                <div className=\"text-danger mb-2\">\n                  {formik.touched.lastname && formik.errors.lastname}\n                </div>\n                <input\n                  value={formik.values.email}\n                  onChange={formik.handleChange(\"email\")}\n                  onBlur={formik.handleBlur(\"email\")}\n                  className=\"form-control mb-2\"\n                  type=\"email\"\n                  placeholder=\"Email\"\n                />\n                {/* Err */}\n                <div className=\"text-danger mb-2\">\n                  {formik.touched.email && formik.errors.email}\n                </div>\n                <input\n                  value={formik.values.password}\n                  onChange={formik.handleChange(\"password\")}\n                  onBlur={formik.handleBlur(\"password\")}\n                  className=\"form-control mb-2\"\n                  type=\"password\"\n                  placeholder=\"Password\"\n                />\n                {/* Err */}\n                <div className=\"text-danger mb-2\">\n                  {formik.touched.password && formik.errors.password}\n                </div>\n                {userLoading ? (\n                  <DisabledButton />\n                ) : (\n                  <button\n                    type=\"submit\"\n                    className=\"btn btn-primary py-2 w-100 mb-4\"\n                  >\n                    Register\n                  </button>\n                )}\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}