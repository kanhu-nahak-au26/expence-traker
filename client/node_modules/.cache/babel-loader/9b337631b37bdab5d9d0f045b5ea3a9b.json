{"ast":null,"code":"import _regeneratorRuntime from\"/home/admin1/attainu/attainu/kanhu-nahak-au26/monthly-tests/Month-07/Full-Stack/expense-tracker /client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/admin1/attainu/attainu/kanhu-nahak-au26/monthly-tests/Month-07/Full-Stack/expense-tracker /client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{createAsyncThunk,createSlice}from\"@reduxjs/toolkit\";import axios from\"axios\";import baseURL from\"../../../utils/baseURL\";//Login action\nexport var loginUserAction=createAsyncThunk(\"user/login\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(payload,_ref){var rejectWithValue,getState,dispatch,config,_yield$axios$post,data,_error$response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:rejectWithValue=_ref.rejectWithValue,getState=_ref.getState,dispatch=_ref.dispatch;config={headers:{\"Content-Type\":\"application/json\"}};_context.prev=2;_context.next=5;return axios.post(\"\".concat(baseURL,\"/users/login\"),payload,config);case 5:_yield$axios$post=_context.sent;data=_yield$axios$post.data;//Save user into localstorage\nlocalStorage.setItem(\"userInfo\",JSON.stringify(data));return _context.abrupt(\"return\",data);case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);if(_context.t0===null||_context.t0===void 0?void 0:_context.t0.response){_context.next=15;break;}throw _context.t0;case 15:return _context.abrupt(\"return\",rejectWithValue(_context.t0===null||_context.t0===void 0?void 0:(_error$response=_context.t0.response)===null||_error$response===void 0?void 0:_error$response.data));case 16:case\"end\":return _context.stop();}}},_callee,null,[[2,11]]);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}());//Logout action\nexport var logout=createAsyncThunk(\"user/logout\",/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(payload,_ref3){var rejectWithValue,getState,dispatch,_error$response2;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:rejectWithValue=_ref3.rejectWithValue,getState=_ref3.getState,dispatch=_ref3.dispatch;_context2.prev=1;//Save user into localstorage\nlocalStorage.removeItem(\"userInfo\");_context2.next=10;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](1);if(_context2.t0===null||_context2.t0===void 0?void 0:_context2.t0.response){_context2.next=9;break;}throw _context2.t0;case 9:return _context2.abrupt(\"return\",rejectWithValue(_context2.t0===null||_context2.t0===void 0?void 0:(_error$response2=_context2.t0.response)===null||_error$response2===void 0?void 0:_error$response2.data));case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[1,5]]);}));return function(_x3,_x4){return _ref4.apply(this,arguments);};}());//register action\nexport var registerUserAction=createAsyncThunk(\"user/register\",/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(payload,_ref5){var rejectWithValue,getState,dispatch,config,_yield$axios$post2,data,_error$response3;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:rejectWithValue=_ref5.rejectWithValue,getState=_ref5.getState,dispatch=_ref5.dispatch;config={headers:{\"Content-Type\":\"application/json\"}};_context3.prev=2;_context3.next=5;return axios.post(\"\".concat(baseURL,\"/users/register\"),payload,config);case 5:_yield$axios$post2=_context3.sent;data=_yield$axios$post2.data;return _context3.abrupt(\"return\",data);case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](2);if(_context3.t0===null||_context3.t0===void 0?void 0:_context3.t0.response){_context3.next=14;break;}throw _context3.t0;case 14:return _context3.abrupt(\"return\",rejectWithValue(_context3.t0===null||_context3.t0===void 0?void 0:(_error$response3=_context3.t0.response)===null||_error$response3===void 0?void 0:_error$response3.data));case 15:case\"end\":return _context3.stop();}}},_callee3,null,[[2,10]]);}));return function(_x5,_x6){return _ref6.apply(this,arguments);};}());//profile\nexport var userProfileAction=createAsyncThunk(\"user/profile\",/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(payload,_ref7){var _getState,_getState$users,_getState$users$userA;var rejectWithValue,getState,dispatch,userToken,config,_yield$axios$get,data,_error$response4;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:rejectWithValue=_ref7.rejectWithValue,getState=_ref7.getState,dispatch=_ref7.dispatch;//get user token from store\nuserToken=(_getState=getState())===null||_getState===void 0?void 0:(_getState$users=_getState.users)===null||_getState$users===void 0?void 0:(_getState$users$userA=_getState$users.userAuth)===null||_getState$users$userA===void 0?void 0:_getState$users$userA.token;config={headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(userToken)}};_context4.prev=3;_context4.next=6;return axios.get(\"\".concat(baseURL,\"/users/profile\"),config);case 6:_yield$axios$get=_context4.sent;data=_yield$axios$get.data;return _context4.abrupt(\"return\",data);case 11:_context4.prev=11;_context4.t0=_context4[\"catch\"](3);if(_context4.t0===null||_context4.t0===void 0?void 0:_context4.t0.response){_context4.next=15;break;}throw _context4.t0;case 15:return _context4.abrupt(\"return\",rejectWithValue(_context4.t0===null||_context4.t0===void 0?void 0:(_error$response4=_context4.t0.response)===null||_error$response4===void 0?void 0:_error$response4.data));case 16:case\"end\":return _context4.stop();}}},_callee4,null,[[3,11]]);}));return function(_x7,_x8){return _ref8.apply(this,arguments);};}());//update\nexport var updateProfileAction=createAsyncThunk(\"user/update\",/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(payload,_ref9){var _getState2,_getState2$users,_getState2$users$user;var rejectWithValue,getState,dispatch,userToken,config,_yield$axios$put,data,_error$response5;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:rejectWithValue=_ref9.rejectWithValue,getState=_ref9.getState,dispatch=_ref9.dispatch;//get user token from store\nuserToken=(_getState2=getState())===null||_getState2===void 0?void 0:(_getState2$users=_getState2.users)===null||_getState2$users===void 0?void 0:(_getState2$users$user=_getState2$users.userAuth)===null||_getState2$users$user===void 0?void 0:_getState2$users$user.token;config={headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(userToken)}};_context5.prev=3;_context5.next=6;return axios.put(\"\".concat(baseURL,\"/users/update\"),{firstname:payload===null||payload===void 0?void 0:payload.firstname,lastname:payload===null||payload===void 0?void 0:payload.lastname,email:payload===null||payload===void 0?void 0:payload.email},config);case 6:_yield$axios$put=_context5.sent;data=_yield$axios$put.data;return _context5.abrupt(\"return\",data);case 11:_context5.prev=11;_context5.t0=_context5[\"catch\"](3);if(_context5.t0===null||_context5.t0===void 0?void 0:_context5.t0.response){_context5.next=15;break;}throw _context5.t0;case 15:return _context5.abrupt(\"return\",rejectWithValue(_context5.t0===null||_context5.t0===void 0?void 0:(_error$response5=_context5.t0.response)===null||_error$response5===void 0?void 0:_error$response5.data));case 16:case\"end\":return _context5.stop();}}},_callee5,null,[[3,11]]);}));return function(_x9,_x10){return _ref10.apply(this,arguments);};}());//slices\n//Get user from local storage and place it inside our store;\nvar userLoginFromStorage=localStorage.getItem(\"userInfo\")?JSON.parse(localStorage.getItem(\"userInfo\")):undefined;var usersSlices=createSlice({name:\"users\",initialState:{userAuth:userLoginFromStorage},extraReducers:function extraReducers(builder){//   Login action\nbuilder.addCase(loginUserAction.pending,function(state,action){state.userLoading=true;state.userAppErr=undefined;state.userServerErr=undefined;});//handle success state\nbuilder.addCase(loginUserAction.fulfilled,function(state,action){state.userAuth=action===null||action===void 0?void 0:action.payload;state.userLoading=false;state.userAppErr=undefined;state.userServerErr=undefined;});//handle rejected state\nbuilder.addCase(loginUserAction.rejected,function(state,action){var _action$payload,_action$error;console.log(action);state.userLoading=false;state.userAppErr=action===null||action===void 0?void 0:(_action$payload=action.payload)===null||_action$payload===void 0?void 0:_action$payload.msg;state.userServerErr=action===null||action===void 0?void 0:(_action$error=action.error)===null||_action$error===void 0?void 0:_action$error.msg;});//   Register\nbuilder.addCase(registerUserAction.pending,function(state,action){state.userLoading=true;state.userAppErr=undefined;state.userServerErr=undefined;});//handle success state\nbuilder.addCase(registerUserAction.fulfilled,function(state,action){state.isRegistered=true;state.userLoading=false;state.userAppErr=undefined;state.userServerErr=undefined;});//handle rejected state\nbuilder.addCase(registerUserAction.rejected,function(state,action){var _action$payload2,_action$error2;state.userLoading=false;state.userAppErr=action===null||action===void 0?void 0:(_action$payload2=action.payload)===null||_action$payload2===void 0?void 0:_action$payload2.msg;state.userServerErr=action===null||action===void 0?void 0:(_action$error2=action.error)===null||_action$error2===void 0?void 0:_action$error2.msg;});// Logout\nbuilder.addCase(logout.fulfilled,function(state,action){state.userAuth=undefined;state.userLoading=false;});//Profile\nbuilder.addCase(userProfileAction.pending,function(state,action){state.loading=true;state.AppErr=undefined;state.ServerErr=undefined;});//handle success state\nbuilder.addCase(userProfileAction.fulfilled,function(state,action){state.profile=action===null||action===void 0?void 0:action.payload;state.loading=false;state.AppErr=undefined;state.ServerErr=undefined;});//handle rejected state\nbuilder.addCase(userProfileAction.rejected,function(state,action){var _action$payload3,_action$error3;state.loading=false;state.AppErr=action===null||action===void 0?void 0:(_action$payload3=action.payload)===null||_action$payload3===void 0?void 0:_action$payload3.msg;state.ServerErr=action===null||action===void 0?void 0:(_action$error3=action.error)===null||_action$error3===void 0?void 0:_action$error3.msg;});//update\nbuilder.addCase(updateProfileAction.pending,function(state,action){state.loading=true;state.AppErr=undefined;state.ServerErr=undefined;});//handle success state\nbuilder.addCase(updateProfileAction.fulfilled,function(state,action){state.userUpdate=action===null||action===void 0?void 0:action.payload;state.isEdited=true;state.loading=false;state.AppErr=undefined;state.ServerErr=undefined;});//handle rejected state\nbuilder.addCase(updateProfileAction.rejected,function(state,action){var _action$payload4,_action$error4;state.loading=false;state.AppErr=action===null||action===void 0?void 0:(_action$payload4=action.payload)===null||_action$payload4===void 0?void 0:_action$payload4.msg;state.ServerErr=action===null||action===void 0?void 0:(_action$error4=action.error)===null||_action$error4===void 0?void 0:_action$error4.msg;});}});export default usersSlices.reducer;","map":{"version":3,"sources":["/home/admin1/attainu/attainu/kanhu-nahak-au26/monthly-tests/Month-07/Full-Stack/expense-tracker /client/src/redux/slices/users/usersSlices.js"],"names":["createAsyncThunk","createSlice","axios","baseURL","loginUserAction","payload","rejectWithValue","getState","dispatch","config","headers","post","data","localStorage","setItem","JSON","stringify","response","logout","removeItem","registerUserAction","userProfileAction","userToken","users","userAuth","token","Authorization","get","updateProfileAction","put","firstname","lastname","email","userLoginFromStorage","getItem","parse","undefined","usersSlices","name","initialState","extraReducers","builder","addCase","pending","state","action","userLoading","userAppErr","userServerErr","fulfilled","rejected","console","log","msg","error","isRegistered","loading","AppErr","ServerErr","profile","userUpdate","isEdited","reducer"],"mappings":"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","sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport baseURL from \"../../../utils/baseURL\";\n\n//Login action\nexport const loginUserAction = createAsyncThunk(\n  \"user/login\",\n  async (payload, { rejectWithValue, getState, dispatch }) => {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n    try {\n      //make http call here\n      const { data } = await axios.post(\n        `${baseURL}/users/login`,\n        payload,\n        config\n      );\n      //Save user into localstorage\n      localStorage.setItem(\"userInfo\", JSON.stringify(data));\n      return data;\n    } catch (error) {\n      if (!error?.response) {\n        throw error;\n      }\n      return rejectWithValue(error?.response?.data);\n    }\n  }\n);\n\n//Logout action\nexport const logout = createAsyncThunk(\n  \"user/logout\",\n  async (payload, { rejectWithValue, getState, dispatch }) => {\n    try {\n      //Save user into localstorage\n      localStorage.removeItem(\"userInfo\");\n    } catch (error) {\n      if (!error?.response) {\n        throw error;\n      }\n      return rejectWithValue(error?.response?.data);\n    }\n  }\n);\n\n//register action\nexport const registerUserAction = createAsyncThunk(\n  \"user/register\",\n  async (payload, { rejectWithValue, getState, dispatch }) => {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n    try {\n      //make http call here\n      const { data } = await axios.post(\n        `${baseURL}/users/register`,\n        payload,\n        config\n      );\n      return data;\n    } catch (error) {\n      if (!error?.response) {\n        throw error;\n      }\n      return rejectWithValue(error?.response?.data);\n    }\n  }\n);\n\n//profile\nexport const userProfileAction = createAsyncThunk(\n  \"user/profile\",\n  async (payload, { rejectWithValue, getState, dispatch }) => {\n    //get user token from store\n    const userToken = getState()?.users?.userAuth?.token;\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${userToken}`,\n      },\n    };\n    try {\n      //make http call here\n      const { data } = await axios.get(`${baseURL}/users/profile`, config);\n      return data;\n    } catch (error) {\n      if (!error?.response) {\n        throw error;\n      }\n      return rejectWithValue(error?.response?.data);\n    }\n  }\n);\n\n//update\nexport const updateProfileAction = createAsyncThunk(\n  \"user/update\",\n  async (payload, { rejectWithValue, getState, dispatch }) => {\n    //get user token from store\n    const userToken = getState()?.users?.userAuth?.token;\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${userToken}`,\n      },\n    };\n    try {\n      //make http call here\n      const { data } = await axios.put(\n        `${baseURL}/users/update`,\n        {\n          firstname: payload?.firstname,\n          lastname: payload?.lastname,\n          email: payload?.email,\n        },\n        config\n      );\n      return data;\n    } catch (error) {\n      if (!error?.response) {\n        throw error;\n      }\n      return rejectWithValue(error?.response?.data);\n    }\n  }\n);\n\n//slices\n//Get user from local storage and place it inside our store;\nconst userLoginFromStorage = localStorage.getItem(\"userInfo\")\n  ? JSON.parse(localStorage.getItem(\"userInfo\"))\n  : undefined;\n\nconst usersSlices = createSlice({\n  name: \"users\",\n  initialState: {\n    userAuth: userLoginFromStorage,\n  },\n  extraReducers: builder => {\n    //   Login action\n    builder.addCase(loginUserAction.pending, (state, action) => {\n      state.userLoading = true;\n      state.userAppErr = undefined;\n      state.userServerErr = undefined;\n    });\n    //handle success state\n    builder.addCase(loginUserAction.fulfilled, (state, action) => {\n      state.userAuth = action?.payload;\n      state.userLoading = false;\n      state.userAppErr = undefined;\n      state.userServerErr = undefined;\n    });\n    //handle rejected state\n    builder.addCase(loginUserAction.rejected, (state, action) => {\n      console.log(action);\n      state.userLoading = false;\n      state.userAppErr = action?.payload?.msg;\n      state.userServerErr = action?.error?.msg;\n    });\n    //   Register\n    builder.addCase(registerUserAction.pending, (state, action) => {\n      state.userLoading = true;\n      state.userAppErr = undefined;\n      state.userServerErr = undefined;\n    });\n    //handle success state\n    builder.addCase(registerUserAction.fulfilled, (state, action) => {\n      state.isRegistered = true;\n      state.userLoading = false;\n      state.userAppErr = undefined;\n      state.userServerErr = undefined;\n    });\n    //handle rejected state\n    builder.addCase(registerUserAction.rejected, (state, action) => {\n      state.userLoading = false;\n      state.userAppErr = action?.payload?.msg;\n      state.userServerErr = action?.error?.msg;\n    });\n    // Logout\n    builder.addCase(logout.fulfilled, (state, action) => {\n      state.userAuth = undefined;\n      state.userLoading = false;\n    });\n\n    //Profile\n    builder.addCase(userProfileAction.pending, (state, action) => {\n      state.loading = true;\n      state.AppErr = undefined;\n      state.ServerErr = undefined;\n    });\n    //handle success state\n    builder.addCase(userProfileAction.fulfilled, (state, action) => {\n      state.profile = action?.payload;\n      state.loading = false;\n      state.AppErr = undefined;\n      state.ServerErr = undefined;\n    });\n    //handle rejected state\n    builder.addCase(userProfileAction.rejected, (state, action) => {\n      state.loading = false;\n      state.AppErr = action?.payload?.msg;\n      state.ServerErr = action?.error?.msg;\n    });\n\n    //update\n    builder.addCase(updateProfileAction.pending, (state, action) => {\n      state.loading = true;\n      state.AppErr = undefined;\n      state.ServerErr = undefined;\n    });\n    //handle success state\n    builder.addCase(updateProfileAction.fulfilled, (state, action) => {\n      state.userUpdate = action?.payload;\n      state.isEdited = true;\n      state.loading = false;\n      state.AppErr = undefined;\n      state.ServerErr = undefined;\n    });\n    //handle rejected state\n    builder.addCase(updateProfileAction.rejected, (state, action) => {\n      state.loading = false;\n      state.AppErr = action?.payload?.msg;\n      state.ServerErr = action?.error?.msg;\n    });\n  },\n});\n\nexport default usersSlices.reducer;\n"]},"metadata":{},"sourceType":"module"}